<!--
   Licensed to the Apache Software Foundation (ASF) under one
   or more contributor license agreements.  See the NOTICE file
   distributed with this work for additional information
   regarding copyright ownership.  The ASF licenses this file
   to you under the Apache License, Version 2.0 (the
   "License"); you may not use this file except in compliance
   with the License.  You may obtain a copy of the License at
 
     http://www.apache.org/licenses/LICENSE-2.0
 
   Unless required by applicable law or agreed to in writing,
   software distributed under the License is distributed on an
   "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
   KIND, either express or implied.  See the License for the
   specific language governing permissions and limitations
   under the License.
-->
<html>
  <head>
    <title>Apache Cayenne Documentation - Caching and Fresh Data</title>
    <style type="text/css">@import "../../../style.css";</style>
  </head>
<body>
  <div class="header">
    <div style="float: left;"><a href="http://cayenne.apache.org/"><img src="../../../images/logo.gif" align="absmiddle" border="0"></a></div>
    <span class="logoSpaceLink"><a href="../../../index.html">Cayenne User Documentation</a></span><br />
    <span class="pagetitle">Caching and Fresh Data</span>
  </div>
<div id="cayenne_toc">
<ul>
<li><a href="../../../Documentation/Cayenne Guide/Introduction/index.html">Introduction</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Installation/index.html">Installation</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Quick Start/index.html">Quick Start</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Design/index.html">Design</a></li>
<li><a href="../../../Documentation/Cayenne Guide/DataContext/index.html">DataContext</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Queries/index.html">Queries</a></li>
<li><a href="../../../Documentation/Cayenne Guide/DataObjects/index.html">DataObjects</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Stored Procedures/index.html">Stored Procedures</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Expressions/index.html">Expressions</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Lifecycle Callbacks/index.html">Lifecycle Callbacks</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Performance Tuning/index.html">Performance Tuning</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Caching and Fresh Data/index.html">Caching and Fresh Data</a><ul>
<li><a href="../../../Documentation/Cayenne Guide/Caching and Fresh Data/RefreshQuery/index.html">RefreshQuery</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Caching and Fresh Data/Object Caching/index.html">Object Caching</a></li>
</ul>
</li>
<li><a href="../../../Documentation/Cayenne Guide/Deployment/index.html">Deployment</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Ant Tasks/index.html">Ant Tasks</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Maven2 Plugins/index.html">Maven2 Plugins</a></li>
<li><a href="../../../Documentation/Cayenne Guide/Customization/index.html">Customization</a></li>
</ul>
</div>
<div id="ConfluenceContent"><h2><a name="CachingandFreshData-WhatIsCachedinCayenne"></a>What Is Cached in Cayenne</h2>

<p>Cayenne uses multiple levels of cache to significantly improve performance by reducing the number of trips to the database. Cayenne caches individual objects, reducing the need to fetch them from the database. It also is able to cache query results, that is, the information about which objects were retrieved by a particular query.</p>

<h2><a name="CachingandFreshData-Objectcache"></a>Object cache</h2>

<p>Individual objects are <a href="../../../Documentation/Cayenne Guide/Caching and Fresh Data/Object Caching/index.html" title="Object Caching">cached by Cayenne</a> by default as they are fetched from the database or created by the user. Such caching is both a performance optimization mechanism and a way to ensure internal object <a href="http://cwiki.apache.org/confluence/confluence/display/CAYDOC/Cayenne%20Contract#CayenneContract-Uniquing" title="Uniquing on Cayenne Contract">uniquing</a>. Users normally do not need to do anything special for this to work.</p>

<p>TODO</p>

<h2><a name="CachingandFreshData-Querycache"></a>Query cache</h2>

<p>The query cache stores the result of a Query (SelectQuery, SqlTemplate or ProcedureQuery). The cached results are lists of objects. The cached list is matched to a query using a unique key internally generated by Cayenne for each query. Please mind that the query cache does not automatically refresh when committing changes, so if you query for all Artists starting with 'B', create a new artist 'Bob' and commit them, perform the same query again without refreshing the cache, then 'Bob' will not be found since the earlier cached query will be returned.</p>

<h3><a name="CachingandFreshData-Refreshingquerycache"></a>Refreshing query cache</h3>

<p>TODO</p>


<h2><a name="CachingandFreshData-PluggableCache"></a>Pluggable Cache</h2>

<p>Third party caching providers can be used with Cayenne to provide more flexible caching options. Out of the box Cayenne provides two implementations of the pluggable cache factory:</p>

<ul>
	<li><tt>'org.apache.cayenne.cache.MapQueryCacheFactory'</tt> is a default factory that uses an LRU map to store query results. LRU map ensures that cached results would not take up all available memory, but otherwise it has no cache expiration mechanism.</li>
</ul>


<ul>
	<li><tt>'org.apache.cayenne.cache.OSQueryCacheFactory'</tt> is a factory that installs OpenSymphony <span class="nobr"><a href="http://www.opensymphony.com/oscache/wiki/Configuration.html" title="Visit page outside Confluence" rel="nofollow">OSCache<sup><img class="rendericon" src="../../../images/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span> as a cache provider for Cayenne queries. It allows to configure cache expiration policies and cross-VM synchronization via an <tt>"oscache.properties"</tt> that should be placed in the CLASSPATH.</li>
</ul>




<h3><a name="CachingandFreshData-Sections"></a>Sections</h3>

<ol>
	<li><a href="../../../Documentation/Cayenne Guide/Caching and Fresh Data/RefreshQuery/index.html" title="RefreshQuery">RefreshQuery</a></li>
	<li><a href="../../../Documentation/Cayenne Guide/Caching and Fresh Data/Object Caching/index.html" title="Object Caching">Object Caching</a></li>
</ol>
</div>
</div>
  <div class="clearer">.</div>
  <div style="height: 12px; background-image: url('../../../images/border_bottom.gif'); background-repeat: repeat-x;"></div>

  <div class="smalltext copyright">
    Copyright &copy;2001-2008 Apache Software Foundation
  </div>

</body>
</html>
