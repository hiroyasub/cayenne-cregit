begin_unit|revision:1.0.0;language:Java;cregit-version:0.0.1
begin_comment
comment|/*****************************************************************  *   Licensed to the Apache Software Foundation (ASF) under one  *  or more contributor license agreements.  See the NOTICE file  *  distributed with this work for additional information  *  regarding copyright ownership.  The ASF licenses this file  *  to you under the Apache License, Version 2.0 (the  *  "License"); you may not use this file except in compliance  *  with the License.  You may obtain a copy of the License at  *  *    https://www.apache.org/licenses/LICENSE-2.0  *  *  Unless required by applicable law or agreed to in writing,  *  software distributed under the License is distributed on an  *  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY  *  KIND, either express or implied.  See the License for the  *  specific language governing permissions and limitations  *  under the License.  ****************************************************************/
end_comment

begin_package
package|package
name|org
operator|.
name|apache
operator|.
name|cayenne
operator|.
name|modeler
operator|.
name|editor
operator|.
name|cgen
operator|.
name|templateeditor
package|;
end_package

begin_import
import|import
name|com
operator|.
name|jgoodies
operator|.
name|forms
operator|.
name|builder
operator|.
name|PanelBuilder
import|;
end_import

begin_import
import|import
name|com
operator|.
name|jgoodies
operator|.
name|forms
operator|.
name|layout
operator|.
name|CellConstraints
import|;
end_import

begin_import
import|import
name|com
operator|.
name|jgoodies
operator|.
name|forms
operator|.
name|layout
operator|.
name|FormLayout
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cayenne
operator|.
name|modeler
operator|.
name|pref
operator|.
name|ComponentGeometry
import|;
end_import

begin_import
import|import
name|org
operator|.
name|apache
operator|.
name|cayenne
operator|.
name|modeler
operator|.
name|util
operator|.
name|ModelerUtil
import|;
end_import

begin_import
import|import
name|org
operator|.
name|fife
operator|.
name|ui
operator|.
name|rsyntaxtextarea
operator|.
name|AbstractTokenMakerFactory
import|;
end_import

begin_import
import|import
name|org
operator|.
name|fife
operator|.
name|ui
operator|.
name|rsyntaxtextarea
operator|.
name|RSyntaxTextArea
import|;
end_import

begin_import
import|import
name|org
operator|.
name|fife
operator|.
name|ui
operator|.
name|rsyntaxtextarea
operator|.
name|SyntaxConstants
import|;
end_import

begin_import
import|import
name|org
operator|.
name|fife
operator|.
name|ui
operator|.
name|rsyntaxtextarea
operator|.
name|TextEditorPane
import|;
end_import

begin_import
import|import
name|org
operator|.
name|fife
operator|.
name|ui
operator|.
name|rsyntaxtextarea
operator|.
name|TokenMakerFactory
import|;
end_import

begin_import
import|import
name|org
operator|.
name|fife
operator|.
name|ui
operator|.
name|rtextarea
operator|.
name|RTextScrollPane
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|BorderFactory
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|Icon
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|ImageIcon
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|JButton
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|JComboBox
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|JFrame
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|JPanel
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|JSplitPane
import|;
end_import

begin_import
import|import
name|javax
operator|.
name|swing
operator|.
name|JToolBar
import|;
end_import

begin_import
import|import
name|java
operator|.
name|awt
operator|.
name|BorderLayout
import|;
end_import

begin_import
import|import
name|java
operator|.
name|awt
operator|.
name|Dimension
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|List
import|;
end_import

begin_comment
comment|/**  * @since 5.0  */
end_comment

begin_class
specifier|public
class|class
name|TemplateEditorView
extends|extends
name|JFrame
block|{
specifier|protected
name|RSyntaxTextArea
name|editingTemplatePane
decl_stmt|;
specifier|protected
name|RSyntaxTextArea
name|classPreviewPane
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|String
name|VELOCITY_KEY
init|=
literal|"text/velocity"
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|ImageIcon
name|modelerIcon
init|=
name|ModelerUtil
operator|.
name|buildIcon
argument_list|(
literal|"CayenneModeler.png"
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|Icon
name|saveIcon
init|=
name|ModelerUtil
operator|.
name|buildIcon
argument_list|(
literal|"icon-save.png"
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|Icon
name|resetToDefaultIcon
init|=
name|ModelerUtil
operator|.
name|buildIcon
argument_list|(
literal|"icon-undo.png"
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|Icon
name|findIcon
init|=
name|ModelerUtil
operator|.
name|buildIcon
argument_list|(
literal|"icon-query.png"
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|Icon
name|findAndReplaceIcon
init|=
name|ModelerUtil
operator|.
name|buildIcon
argument_list|(
literal|"icon-find_and_replace.png"
argument_list|)
decl_stmt|;
specifier|private
specifier|static
specifier|final
name|Icon
name|previewIcon
init|=
name|ModelerUtil
operator|.
name|buildIcon
argument_list|(
literal|"icon-edit.png"
argument_list|)
decl_stmt|;
specifier|protected
name|JButton
name|previewButton
decl_stmt|;
specifier|protected
name|JButton
name|saveButton
decl_stmt|;
specifier|protected
name|JButton
name|findButton
decl_stmt|;
specifier|protected
name|JButton
name|findAndReplaceButton
decl_stmt|;
specifier|protected
name|JButton
name|resetToDefaultButton
decl_stmt|;
specifier|protected
name|JComboBox
argument_list|<
name|String
argument_list|>
name|entityComboBox
decl_stmt|;
specifier|private
name|JSplitPane
name|split
decl_stmt|;
specifier|private
name|JToolBar
name|toolBar
decl_stmt|;
specifier|private
name|JPanel
name|topPanel
decl_stmt|;
specifier|public
name|TemplateEditorView
parameter_list|(
name|List
argument_list|<
name|String
argument_list|>
name|entityNames
parameter_list|)
block|{
name|this
operator|.
name|setIconImage
argument_list|(
name|modelerIcon
operator|.
name|getImage
argument_list|()
argument_list|)
expr_stmt|;
name|this
operator|.
name|editingTemplatePane
operator|=
operator|new
name|TextEditorPane
argument_list|()
expr_stmt|;
name|this
operator|.
name|classPreviewPane
operator|=
operator|new
name|RSyntaxTextArea
argument_list|()
expr_stmt|;
name|initToolBoxComponents
argument_list|(
name|entityNames
argument_list|)
expr_stmt|;
name|mapVelocityTokenMaker
argument_list|()
expr_stmt|;
name|buildView
argument_list|()
expr_stmt|;
name|bindGeometry
argument_list|()
expr_stmt|;
block|}
specifier|private
name|void
name|initToolBoxComponents
parameter_list|(
name|List
argument_list|<
name|String
argument_list|>
name|entityNames
parameter_list|)
block|{
name|this
operator|.
name|saveButton
operator|=
operator|new
name|JButton
argument_list|(
name|saveIcon
argument_list|)
expr_stmt|;
name|this
operator|.
name|saveButton
operator|.
name|setToolTipText
argument_list|(
literal|"Save"
argument_list|)
expr_stmt|;
name|this
operator|.
name|resetToDefaultButton
operator|=
operator|new
name|JButton
argument_list|(
name|resetToDefaultIcon
argument_list|)
expr_stmt|;
name|this
operator|.
name|resetToDefaultButton
operator|.
name|setToolTipText
argument_list|(
literal|"Reset to default template"
argument_list|)
expr_stmt|;
name|this
operator|.
name|findButton
operator|=
operator|new
name|JButton
argument_list|(
name|findIcon
argument_list|)
expr_stmt|;
name|this
operator|.
name|findButton
operator|.
name|setToolTipText
argument_list|(
literal|"Find"
argument_list|)
expr_stmt|;
name|this
operator|.
name|findAndReplaceButton
operator|=
operator|new
name|JButton
argument_list|(
name|findAndReplaceIcon
argument_list|)
expr_stmt|;
name|this
operator|.
name|findAndReplaceButton
operator|.
name|setToolTipText
argument_list|(
literal|"Find and replace"
argument_list|)
expr_stmt|;
name|this
operator|.
name|previewButton
operator|=
operator|new
name|JButton
argument_list|(
name|previewIcon
argument_list|)
expr_stmt|;
name|this
operator|.
name|previewButton
operator|.
name|setToolTipText
argument_list|(
literal|"Generate preview"
argument_list|)
expr_stmt|;
name|this
operator|.
name|entityComboBox
operator|=
operator|new
name|JComboBox
argument_list|<>
argument_list|(
name|entityNames
operator|.
name|toArray
argument_list|(
operator|new
name|String
index|[
literal|0
index|]
argument_list|)
argument_list|)
expr_stmt|;
name|this
operator|.
name|entityComboBox
operator|.
name|setToolTipText
argument_list|(
literal|"Select an entity for the test"
argument_list|)
expr_stmt|;
block|}
specifier|private
name|void
name|buildView
parameter_list|()
block|{
name|initSplitPanel
argument_list|()
expr_stmt|;
name|initToolBar
argument_list|()
expr_stmt|;
name|initTopPanel
argument_list|()
expr_stmt|;
name|getRootPane
argument_list|()
operator|.
name|setBorder
argument_list|(
name|BorderFactory
operator|.
name|createEmptyBorder
argument_list|(
literal|2
argument_list|,
literal|2
argument_list|,
literal|2
argument_list|,
literal|2
argument_list|)
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|setLayout
argument_list|(
operator|new
name|BorderLayout
argument_list|()
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|topPanel
argument_list|,
name|BorderLayout
operator|.
name|NORTH
argument_list|)
expr_stmt|;
name|getContentPane
argument_list|()
operator|.
name|add
argument_list|(
name|split
argument_list|,
name|BorderLayout
operator|.
name|CENTER
argument_list|)
expr_stmt|;
block|}
specifier|private
name|void
name|initSplitPanel
parameter_list|()
block|{
name|editingTemplatePane
operator|.
name|setSyntaxEditingStyle
argument_list|(
name|VELOCITY_KEY
argument_list|)
expr_stmt|;
name|editingTemplatePane
operator|.
name|setMarkOccurrences
argument_list|(
literal|true
argument_list|)
expr_stmt|;
name|RTextScrollPane
name|leftPanel
init|=
operator|new
name|RTextScrollPane
argument_list|(
name|editingTemplatePane
argument_list|)
decl_stmt|;
name|classPreviewPane
operator|.
name|setSyntaxEditingStyle
argument_list|(
name|SyntaxConstants
operator|.
name|SYNTAX_STYLE_JAVA
argument_list|)
expr_stmt|;
name|classPreviewPane
operator|.
name|setEnabled
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|RTextScrollPane
name|rightPanel
init|=
operator|new
name|RTextScrollPane
argument_list|(
name|classPreviewPane
argument_list|)
decl_stmt|;
name|split
operator|=
operator|new
name|JSplitPane
argument_list|(
name|JSplitPane
operator|.
name|HORIZONTAL_SPLIT
argument_list|,
name|leftPanel
argument_list|,
name|rightPanel
argument_list|)
expr_stmt|;
name|split
operator|.
name|setPreferredSize
argument_list|(
operator|new
name|Dimension
argument_list|(
literal|1200
argument_list|,
literal|700
argument_list|)
argument_list|)
expr_stmt|;
name|split
operator|.
name|setDividerSize
argument_list|(
literal|6
argument_list|)
expr_stmt|;
name|split
operator|.
name|setDividerLocation
argument_list|(
literal|1.0
argument_list|)
expr_stmt|;
block|}
specifier|private
name|void
name|initToolBar
parameter_list|()
block|{
name|toolBar
operator|=
operator|new
name|JToolBar
argument_list|()
expr_stmt|;
name|toolBar
operator|.
name|setBorder
argument_list|(
name|BorderFactory
operator|.
name|createEmptyBorder
argument_list|()
argument_list|)
expr_stmt|;
name|toolBar
operator|.
name|setFloatable
argument_list|(
literal|false
argument_list|)
expr_stmt|;
name|toolBar
operator|.
name|add
argument_list|(
name|saveButton
argument_list|)
expr_stmt|;
name|toolBar
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|toolBar
operator|.
name|add
argument_list|(
name|findButton
argument_list|)
expr_stmt|;
name|toolBar
operator|.
name|add
argument_list|(
name|findAndReplaceButton
argument_list|)
expr_stmt|;
name|toolBar
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|toolBar
operator|.
name|add
argument_list|(
name|previewButton
argument_list|)
expr_stmt|;
name|toolBar
operator|.
name|add
argument_list|(
name|entityComboBox
argument_list|)
expr_stmt|;
name|toolBar
operator|.
name|addSeparator
argument_list|()
expr_stmt|;
name|toolBar
operator|.
name|add
argument_list|(
name|resetToDefaultButton
argument_list|)
expr_stmt|;
block|}
specifier|private
name|void
name|initTopPanel
parameter_list|()
block|{
name|CellConstraints
name|constraintsTop
init|=
operator|new
name|CellConstraints
argument_list|()
decl_stmt|;
name|PanelBuilder
name|topPanelBuilder
init|=
operator|new
name|PanelBuilder
argument_list|(
operator|new
name|FormLayout
argument_list|(
literal|"left:pref:grow, right:pref"
argument_list|,
literal|"p, 3dlu, p, 3dlu, p"
argument_list|)
argument_list|)
decl_stmt|;
name|topPanelBuilder
operator|.
name|setDefaultDialogBorder
argument_list|()
expr_stmt|;
name|topPanelBuilder
operator|.
name|add
argument_list|(
name|toolBar
argument_list|,
name|constraintsTop
operator|.
name|xy
argument_list|(
literal|1
argument_list|,
literal|1
argument_list|)
argument_list|)
expr_stmt|;
name|topPanelBuilder
operator|.
name|addSeparator
argument_list|(
literal|""
argument_list|,
name|constraintsTop
operator|.
name|xyw
argument_list|(
literal|1
argument_list|,
literal|3
argument_list|,
literal|2
argument_list|)
argument_list|)
expr_stmt|;
name|topPanelBuilder
operator|.
name|addLabel
argument_list|(
literal|"Editing  template"
argument_list|,
name|constraintsTop
operator|.
name|xy
argument_list|(
literal|1
argument_list|,
literal|5
argument_list|)
argument_list|)
expr_stmt|;
name|topPanelBuilder
operator|.
name|addLabel
argument_list|(
literal|"Class preview"
argument_list|,
name|constraintsTop
operator|.
name|xy
argument_list|(
literal|2
argument_list|,
literal|5
argument_list|)
argument_list|)
expr_stmt|;
name|topPanel
operator|=
name|topPanelBuilder
operator|.
name|getPanel
argument_list|()
expr_stmt|;
block|}
specifier|private
name|void
name|bindGeometry
parameter_list|()
block|{
name|ComponentGeometry
name|geometry
init|=
operator|new
name|ComponentGeometry
argument_list|(
name|this
operator|.
name|getClass
argument_list|()
argument_list|,
literal|"split/divider"
argument_list|)
decl_stmt|;
name|geometry
operator|.
name|bindIntProperty
argument_list|(
name|split
argument_list|,
name|JSplitPane
operator|.
name|DIVIDER_LOCATION_PROPERTY
argument_list|,
literal|600
argument_list|)
expr_stmt|;
name|geometry
operator|.
name|bind
argument_list|(
name|this
argument_list|,
literal|1200
argument_list|,
literal|700
argument_list|,
literal|0
argument_list|)
expr_stmt|;
block|}
specifier|private
name|void
name|mapVelocityTokenMaker
parameter_list|()
block|{
name|AbstractTokenMakerFactory
name|tokenMakerFactory
init|=
operator|(
name|AbstractTokenMakerFactory
operator|)
name|TokenMakerFactory
operator|.
name|getDefaultInstance
argument_list|()
decl_stmt|;
name|tokenMakerFactory
operator|.
name|putMapping
argument_list|(
name|VELOCITY_KEY
argument_list|,
name|VelocityTokenMaker
operator|.
name|class
operator|.
name|getName
argument_list|()
argument_list|)
expr_stmt|;
block|}
specifier|public
name|String
name|getSelectedArtifactName
parameter_list|()
block|{
name|Object
name|selectedItem
init|=
name|entityComboBox
operator|.
name|getSelectedItem
argument_list|()
decl_stmt|;
if|if
condition|(
name|selectedItem
operator|!=
literal|null
condition|)
block|{
return|return
name|selectedItem
operator|.
name|toString
argument_list|()
return|;
block|}
return|return
literal|null
return|;
block|}
specifier|public
name|JButton
name|getPreviewButton
parameter_list|()
block|{
return|return
name|previewButton
return|;
block|}
specifier|public
name|JButton
name|getSaveButton
parameter_list|()
block|{
return|return
name|saveButton
return|;
block|}
specifier|public
name|JButton
name|getFindButton
parameter_list|()
block|{
return|return
name|findButton
return|;
block|}
specifier|public
name|JButton
name|getFindAndReplaceButton
parameter_list|()
block|{
return|return
name|findAndReplaceButton
return|;
block|}
specifier|public
name|JButton
name|getResetToDefaultButton
parameter_list|()
block|{
return|return
name|resetToDefaultButton
return|;
block|}
specifier|public
name|String
name|getTemplateText
parameter_list|()
block|{
return|return
name|editingTemplatePane
operator|.
name|getText
argument_list|()
return|;
block|}
specifier|public
name|RSyntaxTextArea
name|getEditingTemplatePane
parameter_list|()
block|{
return|return
name|editingTemplatePane
return|;
block|}
specifier|public
name|RSyntaxTextArea
name|getClassPreviewPane
parameter_list|()
block|{
return|return
name|classPreviewPane
return|;
block|}
block|}
end_class

end_unit

